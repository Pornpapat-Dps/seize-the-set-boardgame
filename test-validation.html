<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô Set Operations</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
        .pass { background: #d4edda; border-color: #c3e6cb; }
        .fail { background: #f8d7da; border-color: #f5c6cb; }
        .console { background: #f8f9fa; padding: 10px; font-family: monospace; margin: 10px 0; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô Set Operations Logic</h1>
    
    <div id="results"></div>
    
    <button onclick="runAllTests()">‡∏£‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    
    <script>
        function log(message) {
            console.log(message);
            const consoleDiv = document.createElement('div');
            consoleDiv.className = 'console';
            consoleDiv.textContent = message;
            document.getElementById('results').appendChild(consoleDiv);
        }
        
        function testResult(title, expected, actual, details = '') {
            const pass = expected === actual;
            const div = document.createElement('div');
            div.className = `test ${pass ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <h3>${pass ? '‚úÖ' : '‚ùå'} ${title}</h3>
                <p><strong>‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á:</strong> ${expected}</p>
                <p><strong>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</strong> ${actual}</p>
                ${details ? `<p><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> ${details}</p>` : ''}
            `;
            document.getElementById('results').appendChild(div);
            return pass;
        }
        
        function runAllTests() {
            document.getElementById('results').innerHTML = '';
            
            log('‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Set Operations Logic...\n');
            
            // Test 1: Intersection with Empty Set
            log('=== Test 1: Intersection + ‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á ===');
            
            // Mock game state
            let mockBoard = {
                'A1': 'black', 'A2': 'white', 'A3': 'black',
                'B1': 'white', 'B2': 'black', 'B3': 'white',
                'C1': 'black', 'C2': 'white', 'C3': 'black'
            };
            
            const currentPlayer = 'black';
            const opponentColor = 'white';
            
            // Count tokens before
            const opponentTokensBefore = Object.keys(mockBoard).filter(pos => mockBoard[pos] === opponentColor);
            const blackTokensBefore = Object.keys(mockBoard).filter(pos => mockBoard[pos] === 'black');
            
            log(`‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: ‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏î‡∏≥ ${blackTokensBefore.length} ‡∏ä‡πà‡∏≠‡∏á, ‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏Ç‡∏≤‡∏ß ${opponentTokensBefore.length} ‡∏ä‡πà‡∏≠‡∏á`);
            log(`‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏Ç‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö: ${opponentTokensBefore.join(', ')}`);
            
            // Simulate intersection with empty set logic
            const setCard = { cells: [] }; // Empty set
            if (!setCard.cells || setCard.cells.length === 0) {
                // Remove all opponent tokens
                opponentTokensBefore.forEach(pos => {
                    delete mockBoard[pos];
                });
                
                log(`‡∏•‡∏ö‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏Ç‡∏≤‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${opponentTokensBefore.length} ‡∏ä‡πà‡∏≠‡∏á`);
            }
            
            const remainingTokens = Object.keys(mockBoard).filter(pos => mockBoard[pos]);
            const allBlack = remainingTokens.every(pos => mockBoard[pos] === 'black');
            
            testResult(
                'Intersection + ‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á: ‡∏•‡∏ö‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
                true,
                allBlack && opponentTokensBefore.length > 0,
                `‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ ${remainingTokens.length} ‡∏ä‡πà‡∏≠‡∏á (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏î‡∏≥)`
            );
            
            log('');
            
            // Test 2: Complement with 2x2 set
            log('=== Test 2: Complement + ‡πÄ‡∏ã‡∏ï 2x2 ===');
            
            const setCard2x2 = { cells: ['A1', 'A2', 'B1', 'B2'] };
            
            // Generate all cells
            const allCells = [];
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    allCells.push(`${String.fromCharCode(65 + row)}${col + 1}`);
                }
            }
            
            // Get complement
            let resultCells = allCells.filter(pos => !setCard2x2.cells.includes(pos));
            
            log(`‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${allCells.length} ‡∏ä‡πà‡∏≠‡∏á`);
            log(`‡πÄ‡∏ã‡∏ï 2x2: ${setCard2x2.cells.length} ‡∏ä‡πà‡∏≠‡∏á (${setCard2x2.cells.join(', ')})`);
            log(`Complement ‡πÑ‡∏î‡πâ: ${resultCells.length} ‡∏ä‡πà‡∏≠‡∏á`);
            
            testResult(
                'Complement + ‡πÄ‡∏ã‡∏ï 2x2: ‡πÑ‡∏î‡πâ 60 ‡∏ä‡πà‡∏≠‡∏á',
                60,
                resultCells.length,
                `64 - 4 = 60 ‡∏ä‡πà‡∏≠‡∏á`
            );
            
            log('');
            
            // Test 3: Complement with 4x4 set
            log('=== Test 3: Complement + ‡πÄ‡∏ã‡∏ï 4x4 ===');
            
            const setCard4x4 = { cells: [] };
            // Create 4x4 set (A1-D4)
            for (let row = 0; row < 4; row++) {
                for (let col = 0; col < 4; col++) {
                    setCard4x4.cells.push(`${String.fromCharCode(65 + row)}${col + 1}`);
                }
            }
            
            resultCells = allCells.filter(pos => !setCard4x4.cells.includes(pos));
            
            log(`‡πÄ‡∏ã‡∏ï 4x4: ${setCard4x4.cells.length} ‡∏ä‡πà‡∏≠‡∏á (A1-D4)`);
            log(`Complement ‡πÑ‡∏î‡πâ: ${resultCells.length} ‡∏ä‡πà‡∏≠‡∏á`);
            
            testResult(
                'Complement + ‡πÄ‡∏ã‡∏ï 4x4: ‡πÑ‡∏î‡πâ 48 ‡∏ä‡πà‡∏≠‡∏á',
                48,
                resultCells.length,
                `64 - 16 = 48 ‡∏ä‡πà‡∏≠‡∏á`
            );
            
            log('');
            
            // Test 4: Validate cell positions
            log('=== Test 4: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ä‡πà‡∏≠‡∏á ===');
            
            const testCells = ['A1', 'H8', 'D4', 'Z9', 'A0'];
            const validCells = testCells.filter(pos => {
                const letter = pos.charAt(0);
                const number = parseInt(pos.charAt(1));
                return letter >= 'A' && letter <= 'H' && number >= 1 && number <= 8;
            });
            
            log(`‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${testCells.join(', ')}`);
            log(`‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ${validCells.join(', ')}`);
            
            testResult(
                'Validation ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ä‡πà‡∏≠‡∏á',
                3,
                validCells.length,
                `A1, H8, D4 ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á; Z9, A0 ‡∏ú‡∏¥‡∏î`
            );
            
            log('\n=== ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö ===');
            log('‚úÖ Logic ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î');
            log('üìù ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå index.html ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á');
        }
        
        // Auto run on page load
        document.addEventListener('DOMContentLoaded', () => {
            runAllTests();
        });
    </script>
</body>
</html>